<!DOCTYPE html>
<html>
<head>
    <title>MeasureMates</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='image/favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <h1>Upload Images</h1>
    
    <form action="/evaluate" method="post" enctype="multipart/form-data" id="uploadForm">
        <input type="file" name="images" accept="image/*" multiple required id="imageInput" onchange="previewImage(event)">
        <div id="imagePreviewContainer"></div>
        <p id="errorMessage"></p>
        <br>    
        <br>    
        <button type="submit" id="evaluateButton">Evaluate</button>
    </form>

    <br>
    <br>

    <script>
        function previewImage(event) {
            const fileInput = event.target;
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const errorMessage = document.getElementById('errorMessage');
            imagePreviewContainer.innerHTML = ''; // Clear previous previews
    
            if (fileInput.files.length > 0) {
                const validFormats = ['image/jpeg', 'image/jpg', 'image/png'];

                for (let i = 0; i < fileInput.files.length; i++) {
                    const reader = new FileReader();
                    const file = fileInput.files[i];
    
                    if (validFormats.includes(file.type.toLowerCase())) {
                        const img = document.createElement('img');
                        img.style.maxWidth = '100%';
                        img.style.marginTop = '10px';
    
                        reader.onload = function (e) {
                            img.src = e.target.result;
                            imagePreviewContainer.appendChild(img);
                        };
    
                        reader.readAsDataURL(file);
                    } else {
                        errorMessage.innerHTML = 'Invalid image format. Please upload jpg, jpeg, or png files only.';
                        errorMessage.style.color = 'orange'; // Set warning message color
                        errorMessage.style.display = 'block'; // Display the warning message
                    }
                }
            } else {
                errorMessage.innerHTML = 'Please select at least one image file.';
                errorMessage.style.display = 'block'; // Display the error message
            }
        }
    </script>
</body>
</html>
